
// var data2 =`
// <Flames name="August">
// <flame name="blueBird" version="Apophysis 2.09" size="819 783" center="-1.71412316390027 1.07903948380504" scale="2272.1" oversample="1" filter="0.2" quality="1" background="0 0 0" brightness="4" gamma="4" gamma_threshold="0.04" >
//    <xform weight="0.5" color="0.538" linear="1" coefs="0.309815 -0.776148 -0.783771 -0.295504 -0.354577 0.100533" />
//    <xform weight="0.5" color="0.825" linear="1" coefs="0.467597 0.164335 -0.154486 0.458185 -0.687482 0.793655" />
//    <palette count="256" format="RGB">
//       648694587B8A5274834C6E7D496A79466675456573456472
//       40616E416270436473446776466A7A476C7C486E7F486E80
//       486E81486E81496F824B71834E7384517686537888557B8A
//       5C82915F8593638896648A99668D9D68909F6A93A26F9AA8
//       739FAD7DA8B37DA7B17DA6B079A0A9769AA273959D719198
//       627B835B727A5469714F636A4B5D63495B6148596045565C
//       435359445055424C5040494C3C4447394043373D41353B3F
//       2E34392C33372B32362C33372E343830363A33393D384043
//       40484B535C5F5D66696871736C7578717A7E7A83867E898D
//       8A959A909B9F97A2A59FAAACA7B3B4ABB7B8AFBCBDB8C5C5
//       BDCDCECADADBCFDFDFD4E4E4D5E5E5D6E7E7D8E8E9D8E8E8
//       D7E7E7D5E5E5D3E3E3D2E2E2D1E2E1D0E0E0D0DFDECFDEDD
//       CEDDDDCCDBDCCBDADCCAD9DCCAD8DACAD7D9C8D4D6C3D1D4
//       B8C7CBB1C0C4AAB9BDA6B5B9A2B1B69BAAAF93A3A98D9EA4
//       8799A07A8D96778C95758B957289946E89946C88946A8995
//       6788956688956588956487946486946182905F7F8F5E7E8E
//       5D7F8F6284936486946788966B8B9A6F8F9D70919F7192A0
//       6B8B9A658392607B8A5B76855771805069784A626F465B68
//       4356633F52603F5260405361425764445A68455D6C445E70
//       436074436074436175436275436275436174415F73425F70
//       415E6F3F5D6F3F5D6E3F5D6E3F5C6D3F5C6D405B6B3F5A6A
//       3B5363395160384F5E354A593245532E404D2A3B48273642
//       24323E232F3A212D38212D37212D37212D38222F3B24323E
//       273747273849283A4B2A3C4F2B3F522D41542F445733485B
//       384C5E3D5163435768495E6E4F6474566B7B5C7181637887
//       697D8D6E82917388967A8E9B7F94A0869BA48CA1AA92A7AF
//       97ADB39CB1B69FB3B7A1B3B59EAEB299A9AC94A3A68E9CA0
//       88969A8292967E8E947B8D94798D95798E96788F96788D96
//       778A9376879076858C758289748087747F8675818776848B
//       7A8992809299869AA18EA2A993A8AF98ADB49CB0B79DB1B7
//       9BAEB498AAAF95A4AA90A0A68E9EA48A9BA185969C809198
//       7B8E95778C94758C95738C95708B956E8A95688893668794
//    </palette>
// </flame>
// <flame name="blueBird2" version="Apophysis 2.09" size="819 783" center="-1.71412316390027 1.07903948380504" scale="2272.1" oversample="1" filter="0.5" quality="50" background="0 0 0" brightness="4" gamma="4" gamma_threshold="0.04" >
//    <xform weight="0.5" color="0.538" linear="1" coefs="0.309815 -0.776148 -0.783771 -0.295504 -0.354577 0.100533" />
//    <xform weight="0.5" color="0.825" linear="1" coefs="0.467597 0.164335 -0.154486 0.458185 -0.687482 0.793655" />
//    <palette count="256" format="RGB">
//       648694587B8A5274834C6E7D496A79466675456573456472
//       40616E416270436473446776466A7A476C7C486E7F486E80
//       486E81486E81496F824B71834E7384517686537888557B8A
//       5C82915F8593638896648A99668D9D68909F6A93A26F9AA8
//       739FAD7DA8B37DA7B17DA6B079A0A9769AA273959D719198
//       627B835B727A5469714F636A4B5D63495B6148596045565C
//       435359445055424C5040494C3C4447394043373D41353B3F
//       2E34392C33372B32362C33372E343830363A33393D384043
//       40484B535C5F5D66696871736C7578717A7E7A83867E898D
//       8A959A909B9F97A2A59FAAACA7B3B4ABB7B8AFBCBDB8C5C5
//       BDCDCECADADBCFDFDFD4E4E4D5E5E5D6E7E7D8E8E9D8E8E8
//       D7E7E7D5E5E5D3E3E3D2E2E2D1E2E1D0E0E0D0DFDECFDEDD
//       CEDDDDCCDBDCCBDADCCAD9DCCAD8DACAD7D9C8D4D6C3D1D4
//       B8C7CBB1C0C4AAB9BDA6B5B9A2B1B69BAAAF93A3A98D9EA4
//       8799A07A8D96778C95758B957289946E89946C88946A8995
//       6788956688956588956487946486946182905F7F8F5E7E8E
//       5D7F8F6284936486946788966B8B9A6F8F9D70919F7192A0
//       6B8B9A658392607B8A5B76855771805069784A626F465B68
//       4356633F52603F5260405361425764445A68455D6C445E70
//       436074436074436175436275436275436174415F73425F70
//       415E6F3F5D6F3F5D6E3F5D6E3F5C6D3F5C6D405B6B3F5A6A
//       3B5363395160384F5E354A593245532E404D2A3B48273642
//       24323E232F3A212D38212D37212D37212D38222F3B24323E
//       273747273849283A4B2A3C4F2B3F522D41542F445733485B
//       384C5E3D5163435768495E6E4F6474566B7B5C7181637887
//       697D8D6E82917388967A8E9B7F94A0869BA48CA1AA92A7AF
//       97ADB39CB1B69FB3B7A1B3B59EAEB299A9AC94A3A68E9CA0
//       88969A8292967E8E947B8D94798D95798E96788F96788D96
//       778A9376879076858C758289748087747F8675818776848B
//       7A8992809299869AA18EA2A993A8AF98ADB49CB0B79DB1B7
//       9BAEB498AAAF95A4AA90A0A68E9EA48A9BA185969C809198
//       7B8E95778C94758C95738C95708B956E8A95688893668794
//    </palette>
// </flame>
// </Flames>
// `;
var data =`<test>
<flame time="0" palette="15" size="640 480" center="0 0" scale="240" zoom="0" oversample="1" filter="1" quality="10" background="0 0 0" brightness="4" gamma="4" vibrancy="1" hue="0.22851">
   <xform weight="0.25" color="1" spherical="1" coefs="-0.681206 -0.0779465 0.20769 0.755065 -0.0416126 -0.262334"/>
   <xform weight="0.25" color="0.66" spherical="1" coefs="0.953766 0.48396 0.43268 -0.0542476 0.642503 -0.995898"/>
   <xform weight="0.25" color="0.33" spherical="1" coefs="0.840613 -0.816191 0.318971 -0.430402 0.905589 0.909402"/>
   <xform weight="0.25" color="0" spherical="1" coefs="0.960492 -0.466555 0.215383 -0.727377 -0.126074 0.253509"/>
</flame>
<flame time="100" palette="29" size="640 480" center="0 0" scale="240" zoom="0" oversample="1" filter="1" quality="10" background="0 0 0" brightness="4" gamma="4" vibrancy="1" hue="0.147038">
   <xform weight="0.25" color="1" spherical="1" coefs="-0.357523 0.774667 0.397446 0.674359 -0.730708 0.812876"/>
   <xform weight="0.25" color="0.66" spherical="1" coefs="-0.69942 0.141688 -0.743472 0.475451 -0.336206 0.0958816"/>
   <xform weight="0.25" color="0.33" spherical="1" coefs="0.0738451 -0.349212 -0.635205 0.262572 -0.398985 -0.736904"/>
   <xform weight="0.25" color="0" spherical="1" coefs="0.992697 0.433488 -0.427202 -0.339112 -0.507145 0.120765"/>
</flame>
</test>
`;
var data_pos = 0;

console.log(data);

Module['preRun'].push(function() {
  function stdin() {
    if (data_pos >= data.length) {
      return null;
    } else {
      return data.charCodeAt(data_pos++);
    }
  }
  function stdout(x) { console.log(String.fromCharCode(x)); }
  function stderr(x) { console.error(String.fromCharCode(x)); }
  FS.init(stdin);
});


run();

// {{POST_RUN_ADDITIONS}}



Module['postRun'].push(function() {
  var url = URL.createObjectURL(new Blob([FS.readFile('00000.png')], {type: 'image/png'}));
  document.getElementById('brad').src = url;
  console.log(url);
  window.open(url);
});



// {{MODULE_ADDITIONS}}
